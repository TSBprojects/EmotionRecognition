# EmotionRecognition

Software designed to protect Bachelor's Degree Diploma.

## Example. Excerpt from Bachelor's Degree Diploma (RUS)

Описание демонстрационного приложения
Для проверки возможностей разработанного программного обеспечения было реализовано приложение по распознаванию эмоций в видеопотоке или на изображении. 
Интерфейс данного приложения реализован в виде одной экранной формы - «Emotion recognizer» (Рисунок 43). 

![Demo](https://github.com/TSBprojects/EmotionRecognition/blob/master/examples/43.png?raw=true)<br/> 
*Рисунок 43 - Главная и единственная экранная форма*<br/> 

Данная форма разделена на 2 основные части. Левая часть формы отвечает за демонстрацию работы программного обеспечения в видеопотоке, а правая – на изображении.
3.2.1 Демонстрация в видеопотоке
Разберём подробней часть формы, отвечающую за видеопоток.
В верхней области левой части формы мы можем увидеть элемент TextField, представляющий собой текстовое поле, отвечающее за ввод пути к видео, который может представлять собой либо ID записывающего устройства (device id), либо наименование записывающего устройства, либо путь к видео файлу. 
Сразу под текстовым полем ввода пути к видеопотоку, можно наблюдать прямоугольную область, представляющую собой элемент ImageView, содержащий плейсхолдер в виде изображения видео камеры. Именно в нём будет отображаться заданное видео.
Спускаясь ниже, видим четыре кнопки и ещё одну небольшую прямоугольную область, напоминающую область выше, предназначенную для отображения видео. 
Разберём эти пять элементов по порядку.
Кнопка, имеющая название “Только видео”. Отвечает за отображение видеопотока без распознавания в нём эмоций. 
Кнопка “Видео с распознаванием”. Запускает отображение видеопотока с распознаванием эмоций (Рисунок 45). Перед запуском видео, приложение спрашивает пользователя (Рисунок 44), стоит ли сохранить обработанные данные, т.е. само обработанное видео и результаты распознавания в виде json файла (Рисунок 46,47).   
 
![Demo](https://github.com/TSBprojects/EmotionRecognition/blob/master/examples/44.png?raw=true)<br/> 
*Рисунок 44 - Запрос о сохранении медиаданных*<br/> 

![Demo](https://github.com/TSBprojects/EmotionRecognition/blob/master/examples/45.png?raw=true)<br/> 
*Рисунок 45 - Отображение видеопотока с распознаванием эмоций*<br/> 

![Demo](https://github.com/TSBprojects/EmotionRecognition/blob/master/examples/46.png?raw=true)<br/> 
*Рисунок 46 - Результат обработки видеопотока (часть 1)*<br/> 

![Demo](https://github.com/TSBprojects/EmotionRecognition/blob/master/examples/47.png?raw=true)<br/> 
*Рисунок 47 - Результат обработки видеопотока (часть 2)*<br/> 

Кнопка “Стоп”. Останавливает проигрывание видеопотока и запись данных на диск, если она осуществлялась. 
Кнопка “Скриншот”. Осуществляет захват текущего кадра из видеопотока, и отображает в специальной области в правой части формы, для демонстрации распознавания на изображении.
Небольшая прямоугольная область с плейсхолдером в виде камеры.  В ней отображаются предобработанные лица, найденные на текущем фрейме видео, перед их непосредственной подачей на вход свёрточной нейронной сети.
3.2.1 Демонстрация на изображении
Теперь подробно ознакомимся с частью формы, отвечающей за изображения.
В верхней области правой части формы мы можем увидеть текстовое поле, содержащее плейсхолдер “Путь к изображению”, а также кнопку с именем “Обзор”. По нажатию кнопки система предоставит нам окно выбора изображения с жёсткого диска. После выбора нужного изображения путь к нему отобразиться в текстовом поле слева от нажатой кнопки. 
Под текстовым полем и кнопкой “Обзор”, можно обнаружить прямоугольную область, аналогичную области для отображения видеопотока. Здесь будут отображаться изображения, загруженные с жёсткого диска или полученные с помощью кнопки “Скриншот” из видеопотока.
Далее расположились три кнопки и уже знакомая, по левой части формы, небольшая прямоугольная область с плейсхолдером камеры. Ознакомимся с этими элементами:
Кнопка с говорящим названием “Распознать”. При нажатии приложение обрабатывает загруженное изображение. То есть детектирует лица, распознаёт эмоции на них, отрисовывает ограничивающие рамки и подписывает их соответствующими эмоциями (Рисунок 48).
 
![Demo](https://github.com/TSBprojects/EmotionRecognition/blob/master/examples/48.png?raw=true)<br/> 
*Рисунок 48 - Демонстрация распознавания на изображении*<br/> 

Кнопка с именем “Открыть”. Открывает текущее изображение в полном разрешении в отдельном модальном окне (Рисунок 49).

![Demo](https://github.com/TSBprojects/EmotionRecognition/blob/master/examples/49.png?raw=true)<br/> 
*Рисунок 49. Модальное окно с обработанным изображением*<br/> 

Кнопка “Сохранить”. По нажатию приложение спрашивает пользователя, куда сохранить обработанное изображение, найденные лица и информацию о распознанных эмоциях (Рисунок 50).

![Demo](https://github.com/TSBprojects/EmotionRecognition/blob/master/examples/50.png?raw=true)<br/> 
*Рисунок 50 - Результаты обработки изображения*<br/> 

Небольшая прямоугольная область с плейсхолдером в виде камеры.  В ней отображаются предобработанные лица, найденные на загруженном изображении, перед их непосредственной подачей на вход свёрточной нейронной сети.

## Game. Excerpt from Bachelor's Degree Diploma (RUS)

Интерфейс приложения реализован в виде единственной экранной формы, имеющей название «Игра» (Рисунок 51). 

![Demo](https://github.com/TSBprojects/EmotionRecognition/blob/master/examples/51.png?raw=true)<br/> 
*Рисунок 51 - Экранная форма игровой прикладной системы*<br/> 

Суть игры заключается в демонстрации семи базовых эмоций, за одну минуту, удерживая каждую эмоцию не менее одной секунды.
Приложение состоит из двух условных областей. 
Самая крупная область, занимает больше всего места на форме. Это область отображения видеопотока с результатом распознавания в реальном времени. В ней содержится текстовый элемент Label, в котором кратко описана цель игры. Сразу под описанием цели игры находится прямоугольная область, содержащая плейсхолдер камеры с нажимаемым анимированным изображением кнопки плей. При нажатии на данную кнопку, на небольшой промежуток времени отобразятся дополнительные подсказки к игре и прогресс бар (рисунок 52), по завершению загрузки в эту область будет транслироваться видеопоток. Под областью с видеопотоком можно обнаружить различные логотипы, благодаря которым было создано данное игровое приложение.

![Demo](https://github.com/TSBprojects/EmotionRecognition/blob/master/examples/52.png?raw=true)<br/> 
*Рисунок 52 - Подсказки и прогрессбар*<br/> 

Область с перечнем эмоций и счётчиком времени игры. Состоит из 2 элементов соответственно. Первый элемент – Label с текущим временем игры, второй – это элемент VBox, который содержит внутри себя 7 элементов AnchorPane, в соответствии с семью базовыми эмоциями, которые в свою очередь содержат элементы Label с наименованиями этих эмоций. 
После начала игры каждый элемент AnchorPane, представляющий какую-либо эмоцию, по порядку заполняется жёлтым цветом. В один момент времени, жёлтым цветом может быть окрашен только один элемент, что означает требование продемонстрировать эмоцию, указанную в окрашенном элементе. Элементы, представляющие собой удачно продемонстрированные эмоции, окрашиваются в светло зелёный цвет, то есть отмечаются как выполненные. Также осуществляется захват лица с продемонстрированной эмоцией и отображается справа от наименования выполненной эмоции. Это можно наблюдать на рисунке 53.
 
![Demo](https://github.com/TSBprojects/EmotionRecognition/blob/master/examples/53.png?raw=true)<br/> 
*Рисунок 53 - Процесс игры*<br/> 

Если игрок успел продемонстрировать все указанные эмоции за отведенное время, то он будет считаться победившим, что будет написано зленым текстом по истечению времени, вместо краткого описания цели игры (рисунок 54). Также победивший увидит небольшой “салют” в свою честь. В противном случае, игрок будет являться проигравшим, что аналогично будет отображено на месте описания цели игры, но уже красным цветом и без салюта (рисунок 55).
 
![Demo](https://github.com/TSBprojects/EmotionRecognition/blob/master/examples/54.png?raw=true)<br/> 
*Рисунок 54 - Экранная форма игровой прикладной системы*<br/> 

![Demo](https://github.com/TSBprojects/EmotionRecognition/blob/master/examples/55.png?raw=true)<br/> 
*Рисунок 55 - Экранная форма игровой прикладной системы*<br/> 


